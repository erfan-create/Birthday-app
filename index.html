<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Birthday Surprise</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: #ffe6f2;
      overflow: hidden;
    }
    .page {
      display: none;
      height: 100vh;
      width: 100vw;
      text-align: center;
      justify-content: center;
      align-items: center;
      flex-direction: column;
    }
    .active {
      display: flex;
    }
    button {
      padding: 12px 24px;
      font-size: 18px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      background: #ff6699;
      color: white;
      margin-top: 20px;
    }
    /* Intro fading text */
    #introText {
      font-size: 28px;
      color: #cc0066;
      opacity: 0;
      transition: opacity 2s;
      text-align: center;
    }
    /* Memory puzzle */
    #memory-board {
      display: grid;
      grid-template-columns: repeat(3, 120px);
      grid-gap: 15px;
      justify-content: center;
      margin-top: 20px;
    }
    .memory-card {
      width: 120px;
      height: 120px;
      background: #fff;
      border: 2px solid #ff99cc;
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
    }
    .memory-card img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: none;
    }
    /* Flower gallery */
    #flower-gallery {
      position: relative;
      width: 100%;
      height: 100%;
      overflow: hidden;
    }
    .flower {
      position: absolute;
      width: 100px;
      height: 100px;
      object-fit: cover;
    }
    #gallery-message {
      position: absolute;
      top: 20px;
      width: 100%;
      text-align: center;
      font-size: 26px;
      color: #cc0066;
      text-shadow: 1px 1px 3px white;
    }
    /* Scramble puzzle */
    #scramble-sentence {
      margin-top: 20px;
      min-height: 50px;
      font-size: 22px;
      color: #333;
    }
    .word {
      display: inline-block;
      padding: 6px 12px;
      margin: 5px;
      background: #ffccdd;
      border-radius: 6px;
      cursor: pointer;
      font-size: 20px;
    }
    /* Video page */
    #videoPage video {
      max-width: 80%;
      max-height: 80%;
    }
    /* Final message */
    #finalMessage {
      font-size: 32px;
      color: #cc0066;
      opacity: 0;
      transition: opacity 3s;
      text-align: center;
    }
    /* Petals */
    .petal {
      position: fixed;
      top: -50px;
      font-size: 24px;
      color: pink;
      animation: fall linear forwards;
    }
    @keyframes fall {
      to {
        transform: translateY(110vh) rotate(360deg);
        opacity: 0;
      }
    }
  </style>
</head>
<body>

  <!-- Start Page -->
  <div id="startPage" class="page active">
    <button onclick="goToIntro()">Start</button>
  </div>

  <!-- Intro Page -->
  <div id="introPage" class="page">
    <div id="introText"></div>
  </div>

  <!-- Memory Puzzle Page -->
  <div id="memoryPage" class="page">
    <h2>Find the matching flowers</h2>
    <div id="memory-board"></div>
  </div>

  <!-- Flower Gallery Page -->
  <div id="galleryPage" class="page">
    <div id="gallery-message">You are the rarest flower in the garden of Earth</div>
    <div id="flower-gallery"></div>
    <button onclick="goToScramble()">Next</button>
  </div>

  <!-- Scramble Puzzle Page -->
  <div id="scramblePage" class="page">
    <h2>Arrange the words</h2>
    <div id="scramble-words"></div>
    <div id="scramble-sentence"></div>
  </div>

  <!-- Video Page -->
  <div id="videoPage" class="page">
    <video id="birthdayVideo" controls>
      <source src="Video.mp4" type="video/mp4"/>
    </video>
  </div>

  <!-- Final Page -->
  <div id="finalPage" class="page">
    <div id="finalMessage">Always Beloved - Happy Birthday Natalia - 08.09.2025</div>
  </div>

  <audio id="bgMusic" loop>
    <source src="Audio.mp3" type="audio/mpeg"/>
  </audio>

<script>
  let currentPage = 0;
  const pages = document.querySelectorAll('.page');
  const music = document.getElementById('bgMusic');

  function showPage(id) {
    pages.forEach(p => p.classList.remove('active'));
    document.getElementById(id).classList.add('active');
  }

  function goToIntro() {
    showPage('introPage');
    music.volume = 0.5;
    music.play();
    startIntro();
  }

  // Intro fading
  const introText = document.getElementById('introText');
  const introSentences = ["Hello Natalia", "this is", "a small digital gift", "for you", "with love"];
  let introIndex = 0;
  function startIntro() {
    introText.innerText = introSentences[introIndex];
    introText.style.opacity = 1;
    setTimeout(() => fadeIntro(), 2000);
  }
  function fadeIntro() {
    introText.style.opacity = 0;
    setTimeout(() => {
      introIndex++;
      if (introIndex < introSentences.length) {
        introText.innerText = introSentences[introIndex];
        introText.style.opacity = 1;
        setTimeout(() => fadeIntro(), 2000);
      } else {
        setTimeout(() => {
          const btn = document.createElement('button');
          btn.innerText = "Start Puzzle";
          btn.onclick = () => showPage('memoryPage');
          document.getElementById('introPage').appendChild(btn);
        }, 1500);
      }
    }, 2000);
  }

  // Memory Puzzle
  const images = [
    "Frangipani1.jpg",
    "Frangipani2.jpg",
    "Peony1.jpg",
    "Peony2.jpg",
    "Pinkrose.jpg",
    "White1.jpg"
  ];
  const board = document.getElementById('memory-board');
  let memoryCards = [];
  let flipped = [];
  let matched = 0;
  function setupMemory() {
    let pairs = images.concat(images);
    pairs.sort(() => 0.5 - Math.random());
    pairs.forEach(img => {
      const card = document.createElement('div');
      card.classList.add('memory-card');
      const image = document.createElement('img');
      image.src = img;
      card.appendChild(image);
      card.addEventListener('click', () => flipCard(card, img));
      board.appendChild(card);
    });
  }
  function flipCard(card, img) {
    const image = card.querySelector('img');
    if (flipped.length < 2 && !card.classList.contains('flipped')) {
      card.classList.add('flipped');
      image.style.display = 'block';
      flipped.push({card, img});
      if (flipped.length === 2) {
        if (flipped[0].img === flipped[1].img) {
          matched++;
          flipped = [];
          if (matched === images.length) {
            setTimeout(() => showGallery(), 1000);
          }
        } else {
          setTimeout(() => {
            flipped.forEach(f => {
              f.card.classList.remove('flipped');
              f.card.querySelector('img').style.display = 'none';
            });
            flipped = [];
          }, 1000);
        }
      }
    }
  }
  function showGallery() {
    showPage('galleryPage');
    const gallery = document.getElementById('flower-gallery');
    for (let i = 0; i < 50; i++) {
      const img = document.createElement('img');
      img.src = images[Math.floor(Math.random() * images.length)];
      img.classList.add('flower');
      img.style.top = Math.random() * 90 + "%";
      img.style.left = Math.random() * 90 + "%";
      img.style.transform = `rotate(${Math.random()*360}deg)`;
      gallery.appendChild(img);
    }
  }

  // Scramble Puzzle
  const sentence = "The world became bright and colorful on this day when you opened your diamond eyes to the world";
  const words = sentence.split(" ");
  const scrambled = [...words].sort(() => 0.5 - Math.random());
  const scrambleWordsDiv = document.getElementById('scramble-words');
  const scrambleSentenceDiv = document.getElementById('scramble-sentence');
  function setupScramble() {
    scrambled.forEach(w => {
      const span = document.createElement('span');
      span.classList.add('word');
      span.innerText = w;
      span.onclick = () => selectWord(span);
      scrambleWordsDiv.appendChild(span);
    });
  }
  function selectWord(span) {
    if (span.parentElement.id === 'scramble-words') {
      const clone = span.cloneNode(true);
      clone.onclick = () => {
        scrambleSentenceDiv.removeChild(clone);
        scrambleWordsDiv.appendChild(span);
      };
      scrambleSentenceDiv.appendChild(clone);
      scrambleWordsDiv.removeChild(span);
    }
    if (scrambleSentenceDiv.innerText.trim() === sentence) {
      setTimeout(() => showPage('videoPage'), 1000);
    }
  }
  function goToScramble() {
    showPage('scramblePage');
    setupScramble();
  }

  // Video
  const video = document.getElementById('birthdayVideo');
  video.addEventListener('play', () => { music.volume = 0.1; });
  video.addEventListener('ended', () => {
    music.volume = 0.5;
    showFinal();
  });

  // Final page
  function showFinal() {
    showPage('finalPage');
    const msg = document.getElementById('finalMessage');
    setTimeout(() => { msg.style.opacity = 1; }, 500);
    launchPetals();
  }

  function launchPetals() {
    for (let i = 0; i < 20; i++) {
      setTimeout(() => createPetal(), i * 800);
    }
  }
  function createPetal() {
    const petal = document.createElement('div');
    petal.classList.add('petal');
    petal.innerText = "❀";
    petal.style.left = Math.random() * 100 + "vw";
    petal.style.animationDuration = (5 + Math.random()*5) + "s";
    document.body.appendChild(petal);
    setTimeout(() => petal.remove(), 10000);
  }

  setupMemory();
</script>
</body>
</html>
