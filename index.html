<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Natalia's Birthday surprise</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      background: #ffe6f2;
      font-family: 'Arial', sans-serif;
      text-align: center;
      overflow: hidden;
    }
    .page {
      display: none;
      height: 100vh;
      width: 100vw;
      justify-content: center;
      align-items: center;
      flex-direction: column;
    }
    .active {
      display: flex;
    }
    button {
      padding: 12px 24px;
      font-size: 18px;
      border: none;
      border-radius: 8px;
      background: #ff80bf;
      color: white;
      cursor: pointer;
      margin-top: 20px;
    }
    button:hover {
      background: #ff4da6;
    }
    .fade-text {
      font-size: 28px;
      color: #cc0066;
      opacity: 0;
      transition: opacity 2s;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }
    .flowers-container img {
      position: absolute;
      width: 120px;
      height: 120px;
      object-fit: cover;
    }
    .top-message {
      font-size: 26px;
      color: #cc0066;
      font-weight: bold;
      margin-bottom: 20px;
      z-index: 2;
    }
    .petal {
      position: absolute;
      top: -50px;
      width: 25px;
      height: 25px;
      background-image: url('https://i.postimg.cc/yYXpGLpw/White-1.jpg');
      background-size: cover;
      opacity: 0.8;
      animation: fall linear infinite;
    }
    @keyframes fall {
      from { transform: translateY(0) rotate(0deg); }
      to { transform: translateY(100vh) rotate(360deg); }
    }
    .video-frame {
      width: 640px;
      height: 360px;
    }
    .final-message {
      font-size: 32px;
      color: #cc0066;
      font-weight: bold;
      opacity: 0;
      animation: fadeIn 3s forwards;
    }
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
  </style>
</head>
<body>

  <!-- Start Page -->
  <div id="startPage" class="page active">
    <button onclick="goToIntro()">Start</button>
  </div>

  <!-- Intro Page -->
  <div id="introPage" class="page">
    <div id="introText" class="fade-text"></div>
    <button id="startPuzzleBtn" style="display:none;" onclick="startPuzzle()">Start Puzzle</button>
  </div>

  <!-- Puzzle Page -->
  <div id="puzzlePage" class="page">
    <div id="memoryGame"></div>
  </div>

  <!-- Flowers Gallery Page -->
  <div id="flowersPage" class="page">
    <div class="top-message">You are the rarest flower in the garden of Earth</div>
    <div class="flowers-container" id="flowersContainer"></div>
    <button onclick="goToScramble()">Next Puzzle</button>
  </div>

  <!-- Scramble Puzzle Page -->
  <div id="scramblePage" class="page">
    <h2>Arrange the words</h2>
    <div id="scrambleWords"></div>
    <div id="scrambleAnswer"></div>
    <button id="toMessageBtn" style="display:none;" onclick="goToVideo()">The Message</button>
  </div>

  <!-- Video Page -->
  <div id="videoPage" class="page">
    <video id="birthdayVideo" class="video-frame" controls>
      <source src="Video.mp4" type="video/mp4">
      Your browser does not support the video tag.
    </video>
  </div>

  <!-- Final Message Page -->
  <div id="finalPage" class="page">
    <div class="final-message">Always Beloved - Happy Birthday Natalia - 08.09.2025</div>
  </div>

  <!-- Background Music -->
  <audio id="bgMusic" loop>
    <source src="Audio.mp3" type="audio/mpeg">
  </audio>

<script>
let currentPage = "startPage";

function showPage(pageId) {
  document.getElementById(currentPage).classList.remove("active");
  document.getElementById(pageId).classList.add("active");
  currentPage = pageId;
}

function goToIntro() {
  showPage("introPage");
  playIntro();
  document.getElementById("bgMusic").play();
}

function playIntro() {
  const texts = ["Hello Natalia", "this is", "a small digital gift", "for you", "with love"];
  let i = 0;
  const introText = document.getElementById("introText");
  function showNext() {
    if (i < texts.length) {
      introText.textContent = texts[i];
      introText.style.opacity = 1;
      setTimeout(() => {
        introText.style.opacity = 0;
        i++;
        setTimeout(showNext, 2000);
      }, 2000);
    } else {
      document.getElementById("startPuzzleBtn").style.display = "block";
    }
  }
  showNext();
}

function startPuzzle() {
  showPage("puzzlePage");
  initMemoryGame();
}

function initMemoryGame() {
  const images = [
    "Frangipani1.jpg",
    "Frangipani2.jpg",
    "/Peony1.jpg",
    "Peony2.jpg",
    "Pinkrose.jpg",
    "White1.jpg"
  ];
  let cards = images.concat(images);
  cards.sort(() => 0.5 - Math.random());
  const game = document.getElementById("memoryGame");
  game.innerHTML = "";
  cards.forEach(img => {
    const card = document.createElement("img");
    card.src = img;
    card.style.width = "120px";
    card.style.height = "120px";
    card.style.margin = "5px";
    card.onclick = () => cardClicked(card, img);
    game.appendChild(card);
  });
}

let selected = [];
function cardClicked(card, img) {
  selected.push({card, img});
  if (selected.length === 2) {
    if (selected[0].img === selected[1].img) {
      selected = [];
      if (document.querySelectorAll("#memoryGame img[style*='visibility: hidden']").length === 10) {
        goToFlowers();
      }
    } else {
      setTimeout(() => {
        selected.forEach(s => s.card.style.visibility = "hidden");
        selected = [];
      }, 800);
    }
  }
}

function goToFlowers() {
  showPage("flowersPage");
  const container = document.getElementById("flowersContainer");
  container.innerHTML = "";
  const images = [
    "Frangipani1.jpg",
    "Frangipani2.jpg",
    "Peony1.jpg",
    "Peony2.jpg",
    "Pinkrose.jpg",
    "White1.jpg"
  ];
  for (let i = 0; i < 40; i++) {
    const img = document.createElement("img");
    img.src = images[Math.floor(Math.random() * images.length)];
    img.style.top = Math.random() * 80 + "%";
    img.style.left = Math.random() * 90 + "%";
    container.appendChild(img);
  }
}

function goToScramble() {
  showPage("scramblePage");
  initScramble();
}

function initScramble() {
  const sentence = "The world became bright and colorful on this day when you opened your diamond eyes to the world".split(" ");
  const scrambled = [...sentence].sort(() => 0.5 - Math.random());
  const scrambleWords = document.getElementById("scrambleWords");
  const scrambleAnswer = document.getElementById("scrambleAnswer");
  scrambleWords.innerHTML = "";
  scrambleAnswer.innerHTML = "";

  scrambled.forEach(word => {
    const btn = document.createElement("button");
    btn.textContent = word;
    btn.onclick = () => {
      scrambleAnswer.appendChild(btn);
      btn.onclick = () => {
        scrambleWords.appendChild(btn);
        btn.onclick = () => scrambleAnswer.appendChild(btn);
      };
      if (scrambleAnswer.textContent === sentence.join("")) {
        document.getElementById("toMessageBtn").style.display = "block";
      }
    };
    scrambleWords.appendChild(btn);
  });
}

function goToVideo() {
  showPage("videoPage");
  const video = document.getElementById("birthdayVideo");
  const music = document.getElementById("bgMusic");
  music.volume = 0.2;
  video.play();
  video.onended = () => {
    music.volume = 1.0;
    goToFinal();
  };
}

function goToFinal() {
  showPage("finalPage");
  spawnPetals();
}

function spawnPetals() {
  setInterval(() => {
    const petal = document.createElement("div");
    petal.className = "petal";
    petal.style.left = Math.random() * 100 + "vw";
    petal.style.animationDuration = (5 + Math.random() * 5) + "s";
    document.body.appendChild(petal);
    setTimeout(() => petal.remove(), 10000);
  }, 800);
}
</script>
</body>
</html>
